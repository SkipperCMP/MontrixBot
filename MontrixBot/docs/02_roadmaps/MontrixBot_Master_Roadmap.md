# MontrixBot — Master Roadmap

## Назначение документа

Данный документ является **управляющей дорожной картой проекта MontrixBot**.

Он **не описывает продуктовые фичи**, UX-детали или пользовательские сценарии.
Его задача — зафиксировать:

- допустимую последовательность развития проекта,
- архитектурные границы,
- обязательные (MUST) и рекомендуемые (SHOULD) этапы,
- правила перехода между этапами,
- соответствие с Product Roadmap.

**Product Roadmap является источником содержания.**  
**Master Roadmap является источником ограничений и порядка.**

---

## 1. Термины и определения

- **STEP** — логический этап развития системы.
- **MUST** — обязательный этап или требование, без которого дальнейшее развитие запрещено.
- **SHOULD** — рекомендуемый этап, допустимый после закрытия MUST.
- **LATER** — возможное направление, не влияющее на текущие решения.
- **Baseline** — зафиксированное состояние проекта после завершения STEP.
- **Product Roadmap** — документ, описывающий версии, фичи и продуктовый путь.

---

## Роль Master Roadmap

Master Roadmap определяет допустимый порядок развития системы
и ограничения по этапам (STEP).

Он не является списком задач, фич или обещаний реализации.

Любая активность вне текущего ACTIVE STEP
считается недопустимой,
даже если она описана в других документах.

Master Roadmap является обязательным ограничением для:

- Product Roadmap
- Strategies Specification
- SIM Rollout
- Feature Intake решений
- Любых архитектурных изменений

Ни один документ ниже Master Roadmap
не может расширять или ускорять этапы STEP.

---

## 2. Жизненный цикл STEP

Каждый STEP проходит строго следующие состояния:

PLANNED → ACTIVE → DONE → ARCHIVED

Переход к следующему STEP **запрещён**, если:
- текущий STEP не завершён (DONE),
- baseline не зафиксирован,
- выявленные архитектурные долги не закрыты.

---
## 2.1 ROLLBACK STEP (исключительная процедура)

ROLLBACK STEP — это исключительная процедура пересмотра ранее завершённого STEP.

ROLLBACK STEP допускается только в случае, если:
- обнаружена фундаментальная архитектурная ошибка;
- ошибка угрожает корректности последующих STEP;
- исправление невозможно в форме PATCH или REFACTOR.

ROLLBACK STEP:
- приостанавливает текущий ACTIVE STEP;
- возвращает проблемный STEP в состояние ACTIVE;
- требует фиксации причины отката;
- приводит к формированию нового baseline.

ROLLBACK STEP:
- не является развитием системы;
- не используется для улучшений или удобства;
- не может инициироваться из Product Roadmap.

Любой ROLLBACK STEP считается изменением уровня Master Roadmap
и требует явного пересмотра допустимости дальнейших STEP.

---

## 3. Общие правила переходов

1. STEP нельзя пропускать.
2. STEP нельзя выполнять частично.
3. STEP нельзя расширять за пределы его назначения.
4. Архитектурные изменения допустимы **только внутри ACTIVE STEP**.
5. Любая фича, нарушающая границы STEP, считается недопустимой, даже если она есть в Product Roadmap.
6. Закрытый STEP не может быть расширен новыми FEATURE или ARCHITECTURAL CHANGE,
   даже если такие изменения концептуально относились бы к более раннему STEP.
7. Закрытый STEP не может быть расширен изменениями типов:
   - FEATURE
   - IMPROVEMENT
   - ARCHITECTURAL CHANGE

   Допустимы только PATCH и REFACTOR,
   при условии, что они не изменяют контрактов STEP.

---

## 4. Соотношение с Product Roadmap

Для каждого STEP явно указывается соответствие версиям Product Roadmap.

Формат соответствия:

Corresponds to Product Roadmap:
- vX.Y.Z → vA.B.C

Product Roadmap отвечает на вопрос **«что и когда»**,  
Master Roadmap отвечает на вопрос **«можно ли и в каком порядке»**.

---

# STEP 1.x — Core Trading Platform (MUST)
Под автономностью понимается автономность REAL,
а не SIM.

**Corresponds to Product Roadmap:**  
v1.1.1 → v1.4.x

## Назначение STEP

Создать **стабильную, управляемую торговую платформу** с UI и SIM/REAL режимами,
пригодную для ежедневной эксплуатации опытным пользователем.

STEP 1.x формирует **фундамент системы**.  
Без его завершения любое масштабирование запрещено.

## Область ответственности STEP

- Core Engine
- State Management
- Executor
- SIM и REAL режимы
- TPSL Autoloop
- Safe Mode
- Runtime persistence
- Базовый UI
- Сделочный журнал
- **Базовая торговая логика и фильтры, необходимые для функционирования REAL-режима**

## Автономный режим (разрешён в STEP 1.x)

В рамках STEP 1.x допускается автономный режим работы,
в котором система самостоятельно принимает и исполняет торговые решения
на основе детерминированной логики и заданных правил риска.

В рамках STEP 1.x запрещены:
- машинное обучение (ML),
- самообучение,
- самопереписывание торговой логики или авто-тюнинг параметров.

## Ограничения STEP

В рамках STEP 1.x **запрещено**:
- масштабирование на несколько аккаунтов,
- портфельные режимы,
- AI и ML,
- copy-trading,
- маркетплейсы,
- монетизация.

---

# STEP 1.5 — Charts & UX Closure (MUST)

**Corresponds to Product Roadmap:**  
v1.5.x → v1.6.x

## Назначение STEP

Преобразовать технический интерфейс в **полноценный трейдерский терминал**,
не нарушая архитектурной чистоты системы.

## Контрольные требования Master Roadmap

- График является основным элементом UI.
- Визуализация должна быть синхронизирована со state snapshots.
- UX не может напрямую влиять на core.
- Добавление UX-фич не должно снижать стабильность или наблюдаемость.
- Производительность является обязательным критерием приёмки.
- UI control-surface должен быть минимальным и однозначным:
  допускаются только SIM Start/Stop и REAL Start/Stop как верхнеуровневые управляющие элементы.
  Debug/Dev элементы не должны присутствовать в основном UI.

STEP 1.5 фокусируется на визуализации, наблюдаемости
и терминальном UX и не допускает расширения торговой логики.

**STEP 1.5 считается завершённым только при отсутствии архитектурных регрессий,
утечек ответственности между UI и Core и деградации производительности.**

## Ограничения STEP

- Запрещено добавление новой бизнес-логики.
- Запрещено внедрение стратегических или AI-компонентов.
- Запрещено смешение UI и core-ответственностей.

---

# STEP 1.9 — Release-grade Stability (MUST)

**Corresponds to Product Roadmap:**  
v1.9.0

## Назначение STEP

Подготовить систему к **распространению и внешнему использованию**.

## Обязательные условия завершения

- Soak-тесты и длительная стабильная работа.
- Корректное восстановление состояния после сбоя.
- Полностью предсказуемое поведение Safe Mode.
- Завершённая пользовательская документация.
- Зафиксированный baseline релизного качества.
- Системные политики безопасности и деградации (Policy Engine)
- Контроль устаревших данных и задержек исполнения
- Детерминированный порядок приоритета политик (Policy Decision Priority Resolver)
- Явная матрица разрешённых возможностей системы (Capability Matrix), согласованная с Safe Mode и деградациями
- Проверка инвариантов состояния как часть релизной стабильности (Invariant/Contract Validation)
- Формально зафиксированный
  SIM → REAL Recommendation & Observational Channel
  (ScoutNote Contract, Anti-Spam Policy,
   REAL Independence Invariant)
- Единая модель времени и задержек (Time & Clock Consistency) как часть релизной предсказуемости
- Формализованная версия схемы состояния (State Schema Versioning) как условие стабильности
- Формализованный протокол безопасной остановки (Graceful Shutdown) как часть релизной стабильности

Без завершения STEP 1.9 **переход к STEP 2.x запрещён**.

---

# STEP 2.x — Scale & Platform Growth (MUST → SHOULD)

**Corresponds to Product Roadmap:**  
v2.0.0 → v2.5.0

## Назначение STEP

Превратить приложение в **платформу**, сохранив управляемость и наблюдаемость.

**STEP 2.x начинается как MUST (платформенная основа)  
и может переходить в SHOULD по мере завершения ключевых подэтапов.**

## Разрешённые направления

- лицензирование и ограничения доступа,
- multi-account архитектура,
- портфельные режимы,
- copy-trading,
- multi-exchange поддержка.

## Архитектурные ограничения

- Масштабирование без observability запрещено.
- Автоматизация без rollback-механизмов запрещена.
- REAL-логика не может зависеть от SIM.
- Увеличение сложности без изоляции компонентов запрещено.
- Стратегии обязаны быть изолированы по состоянию, риску и отказам
- Рост multi-strategy без изоляции доменов отказов запрещён (Fault Domain Isolation)
- Любые ручные вмешательства обязаны быть отделены от автономных решений и аудируемы (Operator / Automation Boundary)
- Портфельные режимы без формализованной модели распределения риска запрещены (Risk Budget Model)
- Multi-strategy без явной декларации возможностей стратегий запрещён (Strategy Capability Declaration)

---

# STEP 3.x — Advanced Systems & Experiments (SHOULD / LATER)

**Corresponds to Product Roadmap:**  
v3.x.x

## Назначение STEP

Экспериментальные и усиливающие направления развития системы.

## Допустимые области

- AI и ML компоненты,
- интеллектуальная аналитика,
- арбитраж,
- экосистема и сообщество,
- облачные и мобильные решения.

## Важное ограничение

STEP 3.x **никогда не блокирует** развитие и поддержку STEP 1.x и STEP 2.x.

Все элементы STEP 3.x считаются **опциональными** и **обратимыми**.

---

## Trading Strategy Rollout (Canonical)

| Этап      | Стратегии                              |
| --------- | -------------------------------------- |
| **1.5.x** | —                                      |
| **1.6.x** | #2 Impulse Catcher                     |
| **1.7.x** | #6 Spread Scalper                      |
| **1.8.x** | #4 Trend Rider → #10 Trend Pullback    |
| **1.9.x** | #3 Range Reversion, #8 Failed Breakout |
| **2.x**   | #1 Rocket + 2 Anchors, #5, #7, #9      |

Правила:
- стратегии реализуются строго по этапам;
- переход к следующему этапу запрещён без стабилизации предыдущего;
- стратегии одного этапа внедряются **не одновременно**, а последовательно.
Стратегии исполняются исключительно через REAL
и не зависят от рекомендаций SIM.

## SIM Rollout (Canonical)

| Этап      | SIM / аналитика (что легально добавлять) |
| --------- | ---------------------------------------- |
| **1.5.x** | Документ SIM Analytical Framework (канон), базовый набор SIM-индикаторов для UI/наблюдаемости, без влияния на REAL |
| **1.6.x** | ScoutNotes & Recommendations v1 (структура сообщений SIM), ручной просмотр в UI (read-only), без управляющих действий |
| **1.7.x** | TTL / Anti-Spam / Dedupe для ScoutNotes, приоритизация INFO/WARNING/RISK (как метаданные), без сигналов |
| **1.8.x** | SIM Self-Quality Metrics (самодиагностика SIM), логирование качества рекомендаций, без фидбека от торговых решений REAL |
| **1.9.x** | Формально зафиксированный ScoutNote Contract + Policy совместимость (Recommendation & Observational Channel), готовность к релизной стабильности |
| **2.x**   | Cross-asset контекст (optional), расширенная аналитика портфеля (только как контекст), без управления стратегиями |

Правила:
- SIM является аналитическим слоем и не может быть источником торговых сигналов.
- Любые рекомендации SIM не являются командами и могут быть проигнорированы REAL.
- Никакая логика REAL не может зависеть от состояния или выводов SIM.
- Отсутствие SIM и отсутствие ScoutNotes является допустимым состоянием.

---
## Итог

Master Roadmap фиксирует порядок и границы роста MontrixBot,
обеспечивая управляемое развитие без архитектурного хаоса.
