## Назначение документа

Overview предназначен для объяснения того,
КАК устроена система MontrixBot
и как взаимодействуют её основные компоненты.

Он не определяет цели проекта,
которые зафиксированы в Internal Vision,
и не вводит новых правил или ограничений.

Этот документ описывает, КАК устроена система.
Назначение, философия и мотивация проекта
зафиксированы исключительно в MontrixBot_Internal_Vision.md.

# MontrixBot — Обзор проекта

## Что такое MontrixBot

**MontrixBot** — это модульная торгово-аналитическая платформа для работы с финансовыми рынками, в первую очередь с криптовалютами.  
Она проектируется как полноценное приложение, а не как скрипт или одноразовый торговый бот.
MontrixBot может работать в автономном режиме,
в котором торговые решения принимаются самой системой
в рамках заданных правил и механизмов безопасности,
без необходимости постоянного вмешательства пользователя.

Платформа предоставляет единое пространство для:
- наблюдения за рынком,
- симуляции торговли,
- управления позициями,
- анализа данных,
- последующего подключения к реальным торговым площадкам.

С самого начала MontrixBot разрабатывается как долгоживущая система, способная эволюционировать от локального симулятора до распределённой платформы с несколькими интерфейсами.

---

## Архитектура высокого уровня

MontrixBot построен из чётко разделённых слоёв, каждый из которых имеет свою зону ответственности.

### Ядро (Core)

**Ядро** — центральная часть системы. Оно:
- управляет внутренним состоянием,
- обрабатывает события,
- координирует работу компонентов,
- обеспечивает целостность и согласованность данных.

Ядро не зависит от пользовательского интерфейса и может работать:
- с UI,
- без UI,
- в перспективе — в headless-режиме или по сети.

---

### Управление состоянием (State)

Состояние рассматривается как **единый источник истины** для всей системы.

Этот слой отвечает за:
- текущее состояние приложения,
- жизненный цикл позиций,
- режимы работы,
- историю изменений состояния.

Остальные компоненты получают доступ к состоянию только косвенно и не владеют им напрямую.

Жизненный цикл сделки представлен явной моделью состояний,
что обеспечивает наблюдаемость, воспроизводимость и
предсказуемость поведения системы.

---

### Исполнительный слой

Исполнительный слой предназначен для:
- выполнения действий, инициированных ядром,
- взаимодействия с внешними системами,
- изоляции внутренней логики от внешних зависимостей.

Такое разделение позволяет:
- безопасно проводить симуляции,
- контролировать реальные операции,
- заменять источники данных без изменений ядра.

---

### Режим симуляции (SIM)

В MontrixBot реализован полноценный **режим симуляции**.

SIM-режим:
- не использует реальные средства,
- воспроизводит или эмулирует рыночные данные,
- накапливает историю и статистику,
- является равноправным режимом работы системы.

Симуляция — это не заглушка, а важная среда для тестирования, исследования и дальнейшего анализа.

SIM в MontrixBot выполняет роль
непрерывно работающего аналитического слоя.

Он может:
- анализировать весь рынок и историю,
- использовать расширенные индикаторы и алгоритмы,
- выполнять paper trading,
- формировать список кандидатов и наблюдений.

SIM не передаёт REAL значения индикаторов
и не управляет торговыми действиями.
Результатом работы SIM являются
контекстные рекомендации и наблюдения.

SIM использует расширенную аналитику
и набор индикаторов для исследования
рыночного контекста и поиска ситуаций.

REAL использует ограниченный и устойчивый
набор сигналов, достаточный для исполнения
и управления риском.

SIM не передаёт REAL значения индикаторов
или торговые сигналы.

SIM является исследовательским и аналитическим слоем.

Индикаторы и аналитика SIM
не являются сигналами
и не обладают исполнительной силой.

---

## Пользовательский интерфейс (UI)

Пользовательский интерфейс реализован как **настольное приложение**, рассчитанное на длительную непрерывную работу.

### Характеристики UI

- тёмная тема по умолчанию,
- обновление данных в реальном времени,
- высокая отзывчивость,
- отсутствие прямого доступа к состоянию или runtime-файлам.

UI выполняет строго **отображающую функцию**:
- визуализирует состояние системы,
- передаёт пользовательские действия через ограниченный API,
- не содержит бизнес-логики или логики принятия решений.

В основном интерфейсе MontrixBot используются только два уровня управления:
- SIM Start/Stop — включает или отключает аналитическую работу SIM.
- REAL Start/Stop — разрешает или запрещает реальное исполнение (ARM/DISARM).

Режимные переключатели вида "Mode: SIM/REAL", а также debug-элементы ("REAL CLI", "Dry-Run")
не относятся к пользовательскому управлению и не являются частью основного UX.

---

### Компоненты интерфейса

Типовые элементы интерфейса включают:
- графики и визуализацию данных,
- индикаторы состояния системы,
- список активных позиций,
- журнал событий и активности,
- визуальные признаки работоспособности компонентов.

Все обновления интерфейса происходят на основе снапшотов, формируемых ядром.

---

## Событийная модель и обмен данными

MontrixBot использует **событийно-ориентированную архитектуру**.

- изменения состояния формируют снапшоты,
- снапшоты распространяются подписчикам,
- UI обновляется только на их основе,
- отсутствует прямой доступ к изменяемым данным.

Это обеспечивает:
- устойчивость системы,
- предсказуемое поведение,
- изоляцию ошибок,
- упрощение отладки.

MontrixBot ориентирован на воспроизводимость поведения:
торговые сессии могут быть воспроизведены в режиме replay
с проверкой ожидаемых инвариантов системы.

---

## Надёжность и контроль

Платформа включает встроенные механизмы:
- мониторинга активности компонентов,
- обнаружения зависаний и задержек,
- локализации ошибок,
- контролируемой остановки или деградации работы.

Эти механизмы являются частью архитектуры и не зависят от торговой логики.

При запуске система предоставляет диагностическую информацию,
позволяющую понять текущее состояние без анализа логов.
Платформа поддерживает проверку целостности состояния и контрактов,
а также детерминированное разрешение конфликтов политик безопасности.
Текущее множество разрешённых действий системы явно определено и доступно для наблюдения.

Система поддерживает трассировку применения политик безопасности,
позволяя понимать путь принятия решения, а не только итоговый результат.
Система поддерживает контролируемую остановку с сохранением состояния и безопасным продолжением наблюдения.

Перед началом реального исполнения система требует явного
перевода в активное (armed) состояние, что предотвращает
случайные или неподтверждённые торговые действия.

Запуск и остановка системы управления (engine) отделены
от разрешения торговых действий.

Система может находиться в активном состоянии наблюдения
и симуляции без разрешения на реальное исполнение.
Разрешение торговых действий требует отдельного
явного перевода системы в активное (armed) состояние.

Подключение к внешним торговым площадкам сопровождается
проверками конфигурации и рекомендациями по безопасной
эксплуатации API-ключей.

Система поддерживает внешние каналы уведомлений,
позволяющие отслеживать состояние и инциденты
без постоянного присутствия в интерфейсе.

В системе различаются роли:

- SIM — аналитический и разведывательный слой,
  формирующий наблюдения и кандидатов.
- REAL — исполнительный слой,
  принимающий решения в рамках стратегий,
  политик риска и разрешений.

Передача информации из SIM в REAL
осуществляется исключительно
в форме наблюдательных ScoutNotes.

ScoutNotes не являются сигналами,
командами или инструкциями,
не участвуют в исполнении
и могут быть полностью проигнорированы.

### Статус стратегий на STEP 1.x

На этапах STEP 1.x MontrixBot не реализует и не исполняет
канонические торговые стратегии.

Наличие модулей advisor, signals и фильтров
является частью инфраструктурной подготовки платформы
и не означает реализацию стратегического decision-making.

Все стратегические контракты и автоматическое принятие
торговых решений вводятся строго в соответствии
с Master Roadmap, начиная с соответствующих этапов rollout стратегий.

---

## Масштабируемость и развитие

MontrixBot проектируется с расчётом на дальнейшее расширение:

- разделение ядра и интерфейсов,
- поддержка нескольких UI-клиентов,
- возможность сетевого взаимодействия,
- модульное расширение функциональности,
- переносимость между окружениями.

Архитектура позволяет развивать систему без фундаментальной переработки.

---

## Резюме

**MontrixBot — это не:**
- конкретная торговая стратегия,
- «чёрный ящик» автотрейдинга,
- краткосрочный эксперимент.

**MontrixBot — это:**
- инженерная торговая платформа,
- система с приоритетом симуляции и наблюдения,
- расширяемая и контролируемая среда,
- фундамент для долгосрочного развития проекта.

Основной акцент сделан на качестве архитектуры, разделении ответственности и готовности к будущему росту.
